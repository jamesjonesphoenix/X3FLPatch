<?xml version="1.0" standalone="yes" ?>
<?xml-stylesheet href="x2script.xsl" type="text/xsl" ?>
<script>
<name>!move.movetostation.drone</name>
<version>1</version>
<engineversion>73</engineversion>
<description>Drone dock to ship. Drone is caught as a ware instead of traditional ship docking. </description>
<arguments>
<argument index="1" name="target" type="Var/Ship" desc="" />
</arguments>
<sourceplaintext>
<![CDATA[
  $wareDrone = [THIS] -> get ware type code of object
  $wareDrone = get catch ware type: ware=$wareDrone
  $volumeDrone = get volume of ware $wareDrone
  
  if [OWNER] == Player
    $debug = 9595
    $id = [THIS] -> get ID code
    $prepend = sprintf: fmt='Docking "%s ID: %s" to "%s" -', [THIS], $id, $target, null, null
    write to log file #$debug  append=[TRUE]  printf: fmt='%s Start', $prepend, null, null, null, null
  end
  
  $range = $target -> get size of object
  $size = [THIS] -> get size of object
  
  $bufferSmall = 15
  if $size < 150
    $bufferBig = 200
    $bufferSmall = 50
  else if $size < 500
    $bufferBig = 350
  else if $size < 2600
    $bufferBig = 500
  else
    $bufferBig = 600
  end
  
  $rangeBig = $range + $size + $bufferBig
  $rangeSmall = $range + $size + $bufferSmall
  $rangeSmall = get maximum, $rangeSmall, 150, 0, 0, 0
  * no collision buffer should be about 2km
  $bufferCollision = $range + ( $bufferBig * 8 )
  
  $dist = get distance between [THIS] and $target
  $taskMove = null
  $taskCollision = null
  $wait = 20
  $wrongWayMax = 8
  $wrongWayCount = $wrongWayMax
  $distOld = 9999999
  
  while $dist > $range
@   = wait $wait ms
    if not $target -> exists
      [THIS] ->set destination to null
      gosub sub.EndTask
      return null
    end
    
    if not [THIS] -> is in same sector as $target
      gosub sub.EndTask
      return FLRET_OK
    end
    
    gosub sub.CheckCargoBay
    
    write to log file #$debug  append=[TRUE]  printf: fmt='%s Looping', $prepend, null, null, null, null
    
    if [THIS] -> is in active sector
      
      if [THIS] -> find nearest enemy ship: max.dist=10000
        $range = $rangeBig
        $precision = $rangeSmall
      else
  * No collision set in drone.check means we can get closer to target ship, which looks better. 
        $range = $rangeSmall
        $precision = 20
      end
      
      if $dist < ( $range * 3 )
        $wait = 500
      else
        $wait = 1000
      end
      
    else
      $range = $rangeBig
      $precision = $rangeSmall
      $wait = 6000
    end
    
    $dist = get distance between [THIS] and $target
    
    $x = $target -> get x position
    $y = $target -> get y position
    $z = $target -> get z position
    if not [THIS] -> is script !move.movetopositioncontinue on stack of task=$taskMove
      gosub sub.MoveToPosition
    else if $xOld != $x OR $yOld != $y OR $zOld != $z
      gosub sub.MoveToPosition
    else if [THIS] -> is in active sector
      if $dist > $distOld
        dec $wrongWayCount = 
        if not $wrongWayCount
          $wrongWayCount = $wrongWayMax
  * Try to wake drone up from weird maneuver where it flies miles away from target before turning back
          write to log file #$debug  append=[TRUE]  printf: fmt='%s stupidly moving away, call movetoposition again.', $prepend, null, null, null, null
          gosub sub.MoveToPosition
        end
      end
      $distOld = $dist
    end
    
    if not [THIS] -> is script !move.movetostation.drone.check on stack of task=$taskCollision
      $taskCollision = [THIS] -> get next available task: starting=[Task.StartFree]
      [THIS] ->start task $taskCollision with script !move.movetostation.drone.check and prio 100: arg1=$target arg2=$bufferCollision arg3=$taskMove arg4=null arg5=null
    end
  end
  
  * We made it, now to make docking look pretty
  if [THIS] -> is in active sector
    gosub sub.EndTask
@   = [THIS] -> move around 20 ms
    [THIS] ->set desired speed: 0
@   = wait 2000 ms
    [THIS] ->set ship speed to 0
    $x = [THIS] -> get x position
    $y = [THIS] -> get y position
    $z = [THIS] -> get z position
@   START null -> call script !lib.effect.spawn :  =189  =$x  =$y  =$z  =2000
@   = wait 400 ms
  end
  
  gosub sub.CheckCargoBay
  
  * Now we can actually dock. 
  $amount = $target -> get true amount of ware $wareDrone in cargo bay
  $wareObj = [THIS] ->undeploy to flying ware
  $result = $target -> catch ware object $wareObj
  $amount2 = $target -> get true amount of ware $wareDrone in cargo bay
  
  * backup if undeploy and catch ware commands refuse to play nice.
  if $amount2 != ( $amount + 1 )
    if $amount == $amount2
      = [THIS] -> add 1 units of $wareDrone
      
      do if [OWNER] == Player
        write to log file #$debug  append=[TRUE]  printf: fmt='%s Undeploy to catch ware failed, no drone added', $prepend, null, null, null, null
    else
  * if $amount2 > ($amount + 1)
      $amount = -1 * ( $amount2 - $amount - 1 )
      = [THIS] -> add $amount units of $wareDrone
      
      do if [OWNER] == Player
        write to log file #$debug  append=[TRUE]  printf: fmt='%s Undeploy to catch ware failed, more than 1 drone added', $prepend, null, null, null, null
    end
  end
  
  $wares = [THIS] ->get wares table: include equipped=[FALSE]
  if size of table $wares
    $task = $target -> get next available task: starting=[Task.StartFree]
    $target ->start task $task with script !lib.freight.transfer.or.eject and prio 100: arg1=$wares arg2=null arg3=null arg4=null arg5=null
  end
  
  do if [OWNER] == Player
    write to log file #$debug  append=[TRUE]  printf: fmt='%s Finished', $prepend, null, null, null, null
  
  return FLRET_LANDED
  
  * =================
  * Move to position
  * =================
  sub.MoveToPosition:
  skip if $taskMove
    $taskMove = [THIS] -> get next available task: starting=[Task.StartFree]
  write to log file #$debug  append=[TRUE]  printf: fmt='%s Starting move to pos continue', $prepend, null, null, null, null
  [THIS] ->start task $taskMove with script !move.movetopositioncontinue and prio 100: arg1=[SECTOR] arg2=$x arg3=$y arg4=$z arg5=$precision
  $xOld = $x
  $yOld = $y
  $zOld = $z
  endsub
  
  * =================
  * End tasks
  * =================
  sub.EndTask:
  do if $taskMove
    [THIS] ->start task $taskMove with script !lib.interrupt and prio 100: arg1=null arg2=null arg3=null arg4=null arg5=null
  do if $taskCollision
    [THIS] ->start task $taskCollision with script !lib.interrupt and prio 100: arg1=null arg2=null arg3=null arg4=null arg5=null
  endsub
  
  * =================
  * Check target ship has enough free space in cargo bay for a drone.
  * =================
  sub.CheckCargoBay:
  $volumeFree = $target -> get free volume of cargo bay
  $freeSpace = $volumeFree - $volumeDrone
  if $freeSpace < 0
    gosub sub.EndTask
    return FLRET_NOCARGO
  end
  endsub
  return null
]]>
</sourceplaintext>
<sourcetext>
<line indent=""><var>$wareDrone&#160;=&#160;</var><var>[THIS]&#160;-&gt;</var><text>&#160;get&#160;ware&#160;type&#160;code&#160;of&#160;object</text></line>
<line indent=""><var>$wareDrone&#160;=&#160;</var><text>get&#160;catch&#160;ware&#160;type:&#160;ware=</text><var>$wareDrone</var></line>
<line indent=""><var>$volumeDrone&#160;=&#160;</var><text>get&#160;volume&#160;of&#160;ware&#160;</text><var>$wareDrone</var></line>
<line indent=""></line>
<line indent=""><var>if&#160;</var><var>[OWNER]</var><text>&#160;</text><var>==</var><text>&#160;</text><var>Player</var></line>
<line indent="&#160;"><var>$debug&#160;=&#160;</var><var>9595</var></line>
<line indent="&#160;"><var>$id&#160;=&#160;</var><var>[THIS]&#160;-&gt;</var><text>&#160;get&#160;ID&#160;code</text></line>
<line indent="&#160;"><var>$prepend&#160;=&#160;</var><text>sprintf:&#160;fmt=</text><var>'Docking&#160;&quot;%s&#160;ID:&#160;%s&quot;&#160;to&#160;&quot;%s&quot;&#160;-'</var><text>,&#160;</text><var>[THIS]</var><text>,&#160;</text><var>$id</var><text>,&#160;</text><var>$target</var><text>,&#160;</text><var>null</var><text>,&#160;</text><var>null</var></line>
<line indent="&#160;"><text>write&#160;to&#160;log&#160;file&#160;#</text><var>$debug</var><text>&#160;&#160;append=</text><var>[TRUE]</var><text>&#160;&#160;printf:&#160;fmt=</text><var>'%s&#160;Start'</var><text>,&#160;</text><var>$prepend</var><text>,&#160;</text><var>null</var><text>,&#160;</text><var>null</var><text>,&#160;</text><var>null</var><text>,&#160;</text><var>null</var></line>
<line indent=""><text>end</text></line>
<line indent=""></line>
<line indent=""><var>$range&#160;=&#160;</var><var>$target&#160;-&gt;</var><text>&#160;get&#160;size&#160;of&#160;object</text></line>
<line indent=""><var>$size&#160;=&#160;</var><var>[THIS]&#160;-&gt;</var><text>&#160;get&#160;size&#160;of&#160;object</text></line>
<line indent=""></line>
<line indent=""><var>$bufferSmall&#160;=&#160;</var><var>15</var></line>
<line indent=""><var>if&#160;</var><var>$size</var><text>&#160;</text><var>&lt;</var><text>&#160;</text><var>150</var></line>
<line indent="&#160;"><var>$bufferBig&#160;=&#160;</var><var>200</var></line>
<line indent="&#160;"><var>$bufferSmall&#160;=&#160;</var><var>50</var></line>
<line indent=""><var>else&#160;if&#160;</var><var>$size</var><text>&#160;</text><var>&lt;</var><text>&#160;</text><var>500</var></line>
<line indent="&#160;"><var>$bufferBig&#160;=&#160;</var><var>350</var></line>
<line indent=""><var>else&#160;if&#160;</var><var>$size</var><text>&#160;</text><var>&lt;</var><text>&#160;</text><var>2600</var></line>
<line indent="&#160;"><var>$bufferBig&#160;=&#160;</var><var>500</var></line>
<line indent=""><text>else</text></line>
<line indent="&#160;"><var>$bufferBig&#160;=&#160;</var><var>600</var></line>
<line indent=""><text>end</text></line>
<line indent=""></line>
<line indent=""><var>$rangeBig&#160;=&#160;</var><var>$range</var><text>&#160;</text><var>+</var><text>&#160;</text><var>$size</var><text>&#160;</text><var>+</var><text>&#160;</text><var>$bufferBig</var></line>
<line indent=""><var>$rangeSmall&#160;=&#160;</var><var>$range</var><text>&#160;</text><var>+</var><text>&#160;</text><var>$size</var><text>&#160;</text><var>+</var><text>&#160;</text><var>$bufferSmall</var></line>
<line indent=""><var>$rangeSmall&#160;=&#160;</var><text>get&#160;maximum,&#160;</text><var>$rangeSmall</var><text>,&#160;</text><var>150</var><text>,&#160;</text><var>0</var><text>,&#160;</text><var>0</var><text>,&#160;</text><var>0</var></line>
<line indent=""><comment><text>*&#160;</text><var>no&#160;collision&#160;buffer&#160;should&#160;be&#160;about&#160;2km</var></comment></line>
<line indent=""><var>$bufferCollision&#160;=&#160;</var><var>$range</var><text>&#160;</text><var>+</var><text>&#160;</text><var>(</var><text>&#160;</text><var>$bufferBig</var><text>&#160;</text><var>*</var><text>&#160;</text><var>8</var><text>&#160;</text><var>)</var></line>
<line indent=""></line>
<line indent=""><var>$dist&#160;=&#160;</var><text>get&#160;distance&#160;between&#160;</text><var>[THIS]</var><text>&#160;and&#160;</text><var>$target</var></line>
<line indent=""><var>$taskMove&#160;=&#160;</var><var>null</var></line>
<line indent=""><var>$taskCollision&#160;=&#160;</var><var>null</var></line>
<line indent=""><var>$wait&#160;=&#160;</var><var>20</var></line>
<line indent=""><var>$wrongWayMax&#160;=&#160;</var><var>8</var></line>
<line indent=""><var>$wrongWayCount&#160;=&#160;</var><var>$wrongWayMax</var></line>
<line indent=""><var>$distOld&#160;=&#160;</var><var>9999999</var></line>
<line indent=""></line>
<line indent=""><var>while&#160;</var><var>$dist</var><text>&#160;</text><var>&gt;</var><text>&#160;</text><var>$range</var></line>
<line interruptable="@" indent="&#160;"><var>=&#160;</var><text>wait&#160;</text><var>$wait</var><text>&#160;ms</text></line>
<line indent="&#160;"><var>if&#160;not&#160;</var><var>$target&#160;-&gt;</var><text>&#160;exists</text></line>
<line indent="&#160;&#160;"><var>[THIS]&#160;-&gt;</var><text>set&#160;destination&#160;to&#160;</text><var>null</var></line>
<line indent="&#160;&#160;"><text>gosub&#160;</text><var>sub.EndTask</var></line>
<line indent="&#160;&#160;"><text>return&#160;</text><var>null</var></line>
<line indent="&#160;"><text>end</text></line>
<line indent="&#160;"></line>
<line indent="&#160;"><var>if&#160;not&#160;</var><var>[THIS]&#160;-&gt;</var><text>&#160;is&#160;in&#160;same&#160;sector&#160;as&#160;</text><var>$target</var></line>
<line indent="&#160;&#160;"><text>gosub&#160;</text><var>sub.EndTask</var></line>
<line indent="&#160;&#160;"><text>return&#160;</text><var>FLRET_OK</var></line>
<line indent="&#160;"><text>end</text></line>
<line indent="&#160;"></line>
<line indent="&#160;"><text>gosub&#160;</text><var>sub.CheckCargoBay</var></line>
<line indent="&#160;"></line>
<line indent="&#160;"><text>write&#160;to&#160;log&#160;file&#160;#</text><var>$debug</var><text>&#160;&#160;append=</text><var>[TRUE]</var><text>&#160;&#160;printf:&#160;fmt=</text><var>'%s&#160;Looping'</var><text>,&#160;</text><var>$prepend</var><text>,&#160;</text><var>null</var><text>,&#160;</text><var>null</var><text>,&#160;</text><var>null</var><text>,&#160;</text><var>null</var></line>
<line indent="&#160;"></line>
<line indent="&#160;"><var>if&#160;</var><var>[THIS]&#160;-&gt;</var><text>&#160;is&#160;in&#160;active&#160;sector</text></line>
<line indent="&#160;&#160;"></line>
<line indent="&#160;&#160;"><var>if&#160;</var><var>[THIS]&#160;-&gt;</var><text>&#160;find&#160;nearest&#160;enemy&#160;ship:&#160;max.dist=</text><var>10000</var></line>
<line indent="&#160;&#160;&#160;"><var>$range&#160;=&#160;</var><var>$rangeBig</var></line>
<line indent="&#160;&#160;&#160;"><var>$precision&#160;=&#160;</var><var>$rangeSmall</var></line>
<line indent="&#160;&#160;"><text>else</text></line>
<line indent=""><comment><text>*&#160;</text><var>No&#160;collision&#160;set&#160;in&#160;drone.check&#160;means&#160;we&#160;can&#160;get&#160;closer&#160;to&#160;target&#160;ship,&#160;which&#160;looks&#160;better.&#160;</var></comment></line>
<line indent="&#160;&#160;&#160;"><var>$range&#160;=&#160;</var><var>$rangeSmall</var></line>
<line indent="&#160;&#160;&#160;"><var>$precision&#160;=&#160;</var><var>20</var></line>
<line indent="&#160;&#160;"><text>end</text></line>
<line indent="&#160;&#160;"></line>
<line indent="&#160;&#160;"><var>if&#160;</var><var>$dist</var><text>&#160;</text><var>&lt;</var><text>&#160;</text><var>(</var><text>&#160;</text><var>$range</var><text>&#160;</text><var>*</var><text>&#160;</text><var>3</var><text>&#160;</text><var>)</var></line>
<line indent="&#160;&#160;&#160;"><var>$wait&#160;=&#160;</var><var>500</var></line>
<line indent="&#160;&#160;"><text>else</text></line>
<line indent="&#160;&#160;&#160;"><var>$wait&#160;=&#160;</var><var>1000</var></line>
<line indent="&#160;&#160;"><text>end</text></line>
<line indent="&#160;&#160;"></line>
<line indent="&#160;"><text>else</text></line>
<line indent="&#160;&#160;"><var>$range&#160;=&#160;</var><var>$rangeBig</var></line>
<line indent="&#160;&#160;"><var>$precision&#160;=&#160;</var><var>$rangeSmall</var></line>
<line indent="&#160;&#160;"><var>$wait&#160;=&#160;</var><var>6000</var></line>
<line indent="&#160;"><text>end</text></line>
<line indent="&#160;"></line>
<line indent="&#160;"><var>$dist&#160;=&#160;</var><text>get&#160;distance&#160;between&#160;</text><var>[THIS]</var><text>&#160;and&#160;</text><var>$target</var></line>
<line indent="&#160;"></line>
<line indent="&#160;"><var>$x&#160;=&#160;</var><var>$target&#160;-&gt;</var><text>&#160;get&#160;x&#160;position</text></line>
<line indent="&#160;"><var>$y&#160;=&#160;</var><var>$target&#160;-&gt;</var><text>&#160;get&#160;y&#160;position</text></line>
<line indent="&#160;"><var>$z&#160;=&#160;</var><var>$target&#160;-&gt;</var><text>&#160;get&#160;z&#160;position</text></line>
<line indent="&#160;"><var>if&#160;not&#160;</var><var>[THIS]&#160;-&gt;</var><text>&#160;is&#160;script&#160;</text><call>!move.movetopositioncontinue</call><text>&#160;on&#160;stack&#160;of&#160;task=</text><var>$taskMove</var></line>
<line indent="&#160;&#160;"><text>gosub&#160;</text><var>sub.MoveToPosition</var></line>
<line indent="&#160;"><var>else&#160;if&#160;</var><var>$xOld</var><text>&#160;</text><var>!=</var><text>&#160;</text><var>$x</var><text>&#160;</text><var>OR</var><text>&#160;</text><var>$yOld</var><text>&#160;</text><var>!=</var><text>&#160;</text><var>$y</var><text>&#160;</text><var>OR</var><text>&#160;</text><var>$zOld</var><text>&#160;</text><var>!=</var><text>&#160;</text><var>$z</var></line>
<line indent="&#160;&#160;"><text>gosub&#160;</text><var>sub.MoveToPosition</var></line>
<line indent="&#160;"><var>else&#160;if&#160;</var><var>[THIS]&#160;-&gt;</var><text>&#160;is&#160;in&#160;active&#160;sector</text></line>
<line indent="&#160;&#160;"><var>if&#160;</var><var>$dist</var><text>&#160;</text><var>&gt;</var><text>&#160;</text><var>$distOld</var></line>
<line indent="&#160;&#160;&#160;"><text>dec&#160;</text><var>$wrongWayCount&#160;=&#160;</var></line>
<line indent="&#160;&#160;&#160;"><var>if&#160;not&#160;</var><var>$wrongWayCount</var></line>
<line indent="&#160;&#160;&#160;&#160;"><var>$wrongWayCount&#160;=&#160;</var><var>$wrongWayMax</var></line>
<line indent=""><comment><text>*&#160;</text><var>Try&#160;to&#160;wake&#160;drone&#160;up&#160;from&#160;weird&#160;maneuver&#160;where&#160;it&#160;flies&#160;miles&#160;away&#160;from&#160;target&#160;before&#160;turning&#160;back</var></comment></line>
<line indent="&#160;&#160;&#160;&#160;"><text>write&#160;to&#160;log&#160;file&#160;#</text><var>$debug</var><text>&#160;&#160;append=</text><var>[TRUE]</var><text>&#160;&#160;printf:&#160;fmt=</text><var>'%s&#160;stupidly&#160;moving&#160;away,&#160;call&#160;movetoposition&#160;again.'</var><text>,&#160;</text><var>$prepend</var><text>,&#160;</text><var>null</var><text>,&#160;</text><var>null</var><text>,&#160;</text><var>null</var><text>,&#160;</text><var>null</var></line>
<line indent="&#160;&#160;&#160;&#160;"><text>gosub&#160;</text><var>sub.MoveToPosition</var></line>
<line indent="&#160;&#160;&#160;"><text>end</text></line>
<line indent="&#160;&#160;"><text>end</text></line>
<line indent="&#160;&#160;"><var>$distOld&#160;=&#160;</var><var>$dist</var></line>
<line indent="&#160;"><text>end</text></line>
<line indent="&#160;"></line>
<line indent="&#160;"><var>if&#160;not&#160;</var><var>[THIS]&#160;-&gt;</var><text>&#160;is&#160;script&#160;</text><call>!move.movetostation.drone.check</call><text>&#160;on&#160;stack&#160;of&#160;task=</text><var>$taskCollision</var></line>
<line indent="&#160;&#160;"><var>$taskCollision&#160;=&#160;</var><var>[THIS]&#160;-&gt;</var><text>&#160;get&#160;next&#160;available&#160;task:&#160;starting=</text><var>[Task.StartFree]</var></line>
<line indent="&#160;&#160;"><var>[THIS]&#160;-&gt;</var><text>start&#160;task&#160;</text><var>$taskCollision</var><text>&#160;with&#160;script&#160;</text><call>!move.movetostation.drone.check</call><text>&#160;and&#160;prio&#160;</text><var>100</var><text>:&#160;arg1=</text><var>$target</var><text>&#160;arg2=</text><var>$bufferCollision</var><text>&#160;arg3=</text><var>$taskMove</var><text>&#160;arg4=</text><var>null</var><text>&#160;arg5=</text><var>null</var></line>
<line indent="&#160;"><text>end</text></line>
<line indent=""><text>end</text></line>
<line indent=""></line>
<line indent=""><comment><text>*&#160;</text><var>We&#160;made&#160;it,&#160;now&#160;to&#160;make&#160;docking&#160;look&#160;pretty</var></comment></line>
<line indent=""><var>if&#160;</var><var>[THIS]&#160;-&gt;</var><text>&#160;is&#160;in&#160;active&#160;sector</text></line>
<line indent="&#160;"><text>gosub&#160;</text><var>sub.EndTask</var></line>
<line interruptable="@" indent="&#160;"><var>=&#160;</var><var>[THIS]&#160;-&gt;</var><text>&#160;move&#160;around&#160;</text><var>20</var><text>&#160;ms</text></line>
<line indent="&#160;"><var>[THIS]&#160;-&gt;</var><text>set&#160;desired&#160;speed:&#160;</text><var>0</var></line>
<line interruptable="@" indent="&#160;"><var>=&#160;</var><text>wait&#160;</text><var>2000</var><text>&#160;ms</text></line>
<line indent="&#160;"><var>[THIS]&#160;-&gt;</var><text>set&#160;ship&#160;speed&#160;to&#160;</text><var>0</var></line>
<line indent="&#160;"><var>$x&#160;=&#160;</var><var>[THIS]&#160;-&gt;</var><text>&#160;get&#160;x&#160;position</text></line>
<line indent="&#160;"><var>$y&#160;=&#160;</var><var>[THIS]&#160;-&gt;</var><text>&#160;get&#160;y&#160;position</text></line>
<line indent="&#160;"><var>$z&#160;=&#160;</var><var>[THIS]&#160;-&gt;</var><text>&#160;get&#160;z&#160;position</text></line>
<line interruptable="@" indent="&#160;"><var>START&#160;</var><var>null&#160;-&gt;</var><text>&#160;call&#160;script&#160;</text><call>!lib.effect.spawn</call><text>&#160;:&#160;</text><text>&#160;=</text><var>189</var><text>&#160;</text><text>&#160;=</text><var>$x</var><text>&#160;</text><text>&#160;=</text><var>$y</var><text>&#160;</text><text>&#160;=</text><var>$z</var><text>&#160;</text><text>&#160;=</text><var>2000</var></line>
<line interruptable="@" indent="&#160;"><var>=&#160;</var><text>wait&#160;</text><var>400</var><text>&#160;ms</text></line>
<line indent=""><text>end</text></line>
<line indent=""></line>
<line indent=""><text>gosub&#160;</text><var>sub.CheckCargoBay</var></line>
<line indent=""></line>
<line indent=""><comment><text>*&#160;</text><var>Now&#160;we&#160;can&#160;actually&#160;dock.&#160;</var></comment></line>
<line indent=""><var>$amount&#160;=&#160;</var><var>$target&#160;-&gt;</var><text>&#160;get&#160;true&#160;amount&#160;of&#160;ware&#160;</text><var>$wareDrone</var><text>&#160;in&#160;cargo&#160;bay</text></line>
<line indent=""><var>$wareObj&#160;=&#160;</var><var>[THIS]&#160;-&gt;</var><text>undeploy&#160;to&#160;flying&#160;ware</text></line>
<line indent=""><var>$result&#160;=&#160;</var><var>$target&#160;-&gt;</var><text>&#160;catch&#160;ware&#160;object&#160;</text><var>$wareObj</var></line>
<line indent=""><var>$amount2&#160;=&#160;</var><var>$target&#160;-&gt;</var><text>&#160;get&#160;true&#160;amount&#160;of&#160;ware&#160;</text><var>$wareDrone</var><text>&#160;in&#160;cargo&#160;bay</text></line>
<line indent=""></line>
<line indent=""><comment><text>*&#160;</text><var>backup&#160;if&#160;undeploy&#160;and&#160;catch&#160;ware&#160;commands&#160;refuse&#160;to&#160;play&#160;nice.</var></comment></line>
<line indent=""><var>if&#160;</var><var>$amount2</var><text>&#160;</text><var>!=</var><text>&#160;</text><var>(</var><text>&#160;</text><var>$amount</var><text>&#160;</text><var>+</var><text>&#160;</text><var>1</var><text>&#160;</text><var>)</var></line>
<line indent="&#160;"><var>if&#160;</var><var>$amount</var><text>&#160;</text><var>==</var><text>&#160;</text><var>$amount2</var></line>
<line indent="&#160;&#160;"><var>=&#160;</var><var>[THIS]&#160;-&gt;</var><text>&#160;add&#160;</text><var>1</var><text>&#160;units&#160;of&#160;</text><var>$wareDrone</var></line>
<line indent="&#160;&#160;"></line>
<line indent="&#160;&#160;"><var>do&#160;if&#160;</var><var>[OWNER]</var><text>&#160;</text><var>==</var><text>&#160;</text><var>Player</var></line>
<line indent="&#160;&#160;&#160;"><text>write&#160;to&#160;log&#160;file&#160;#</text><var>$debug</var><text>&#160;&#160;append=</text><var>[TRUE]</var><text>&#160;&#160;printf:&#160;fmt=</text><var>'%s&#160;Undeploy&#160;to&#160;catch&#160;ware&#160;failed,&#160;no&#160;drone&#160;added'</var><text>,&#160;</text><var>$prepend</var><text>,&#160;</text><var>null</var><text>,&#160;</text><var>null</var><text>,&#160;</text><var>null</var><text>,&#160;</text><var>null</var></line>
<line indent="&#160;"><text>else</text></line>
<line indent=""><comment><text>*&#160;</text><var>if&#160;$amount2&#160;&gt;&#160;($amount&#160;+&#160;1)</var></comment></line>
<line indent="&#160;&#160;"><var>$amount&#160;=&#160;</var><var>-1</var><text>&#160;</text><var>*</var><text>&#160;</text><var>(</var><text>&#160;</text><var>$amount2</var><text>&#160;</text><var>-</var><text>&#160;</text><var>$amount</var><text>&#160;</text><var>-</var><text>&#160;</text><var>1</var><text>&#160;</text><var>)</var></line>
<line indent="&#160;&#160;"><var>=&#160;</var><var>[THIS]&#160;-&gt;</var><text>&#160;add&#160;</text><var>$amount</var><text>&#160;units&#160;of&#160;</text><var>$wareDrone</var></line>
<line indent="&#160;&#160;"></line>
<line indent="&#160;&#160;"><var>do&#160;if&#160;</var><var>[OWNER]</var><text>&#160;</text><var>==</var><text>&#160;</text><var>Player</var></line>
<line indent="&#160;&#160;&#160;"><text>write&#160;to&#160;log&#160;file&#160;#</text><var>$debug</var><text>&#160;&#160;append=</text><var>[TRUE]</var><text>&#160;&#160;printf:&#160;fmt=</text><var>'%s&#160;Undeploy&#160;to&#160;catch&#160;ware&#160;failed,&#160;more&#160;than&#160;1&#160;drone&#160;added'</var><text>,&#160;</text><var>$prepend</var><text>,&#160;</text><var>null</var><text>,&#160;</text><var>null</var><text>,&#160;</text><var>null</var><text>,&#160;</text><var>null</var></line>
<line indent="&#160;"><text>end</text></line>
<line indent=""><text>end</text></line>
<line indent=""></line>
<line indent=""><var>$wares&#160;=&#160;</var><var>[THIS]&#160;-&gt;</var><text>get&#160;wares&#160;table:&#160;include&#160;equipped=</text><var>[FALSE]</var></line>
<line indent=""><var>if&#160;</var><text>size&#160;of&#160;table&#160;</text><var>$wares</var></line>
<line indent="&#160;"><var>$task&#160;=&#160;</var><var>$target&#160;-&gt;</var><text>&#160;get&#160;next&#160;available&#160;task:&#160;starting=</text><var>[Task.StartFree]</var></line>
<line indent="&#160;"><var>$target&#160;-&gt;</var><text>start&#160;task&#160;</text><var>$task</var><text>&#160;with&#160;script&#160;</text><call>!lib.freight.transfer.or.eject</call><text>&#160;and&#160;prio&#160;</text><var>100</var><text>:&#160;arg1=</text><var>$wares</var><text>&#160;arg2=</text><var>null</var><text>&#160;arg3=</text><var>null</var><text>&#160;arg4=</text><var>null</var><text>&#160;arg5=</text><var>null</var></line>
<line indent=""><text>end</text></line>
<line indent=""></line>
<line indent=""><var>do&#160;if&#160;</var><var>[OWNER]</var><text>&#160;</text><var>==</var><text>&#160;</text><var>Player</var></line>
<line indent="&#160;"><text>write&#160;to&#160;log&#160;file&#160;#</text><var>$debug</var><text>&#160;&#160;append=</text><var>[TRUE]</var><text>&#160;&#160;printf:&#160;fmt=</text><var>'%s&#160;Finished'</var><text>,&#160;</text><var>$prepend</var><text>,&#160;</text><var>null</var><text>,&#160;</text><var>null</var><text>,&#160;</text><var>null</var><text>,&#160;</text><var>null</var></line>
<line indent=""></line>
<line indent=""><text>return&#160;</text><var>FLRET_LANDED</var></line>
<line indent=""></line>
<line indent=""><comment><text>*&#160;</text><var>=================</var></comment></line>
<line indent=""><comment><text>*&#160;</text><var>Move&#160;to&#160;position</var></comment></line>
<line indent=""><comment><text>*&#160;</text><var>=================</var></comment></line>
<line indent=""><var>sub.MoveToPosition</var><text>:</text></line>
<line indent=""><var>skip&#160;if&#160;</var><var>$taskMove</var></line>
<line indent="&#160;"><var>$taskMove&#160;=&#160;</var><var>[THIS]&#160;-&gt;</var><text>&#160;get&#160;next&#160;available&#160;task:&#160;starting=</text><var>[Task.StartFree]</var></line>
<line indent=""><text>write&#160;to&#160;log&#160;file&#160;#</text><var>$debug</var><text>&#160;&#160;append=</text><var>[TRUE]</var><text>&#160;&#160;printf:&#160;fmt=</text><var>'%s&#160;Starting&#160;move&#160;to&#160;pos&#160;continue'</var><text>,&#160;</text><var>$prepend</var><text>,&#160;</text><var>null</var><text>,&#160;</text><var>null</var><text>,&#160;</text><var>null</var><text>,&#160;</text><var>null</var></line>
<line indent=""><var>[THIS]&#160;-&gt;</var><text>start&#160;task&#160;</text><var>$taskMove</var><text>&#160;with&#160;script&#160;</text><call>!move.movetopositioncontinue</call><text>&#160;and&#160;prio&#160;</text><var>100</var><text>:&#160;arg1=</text><var>[SECTOR]</var><text>&#160;arg2=</text><var>$x</var><text>&#160;arg3=</text><var>$y</var><text>&#160;arg4=</text><var>$z</var><text>&#160;arg5=</text><var>$precision</var></line>
<line indent=""><var>$xOld&#160;=&#160;</var><var>$x</var></line>
<line indent=""><var>$yOld&#160;=&#160;</var><var>$y</var></line>
<line indent=""><var>$zOld&#160;=&#160;</var><var>$z</var></line>
<line indent=""><text>endsub</text></line>
<line indent=""></line>
<line indent=""><comment><text>*&#160;</text><var>=================</var></comment></line>
<line indent=""><comment><text>*&#160;</text><var>End&#160;tasks</var></comment></line>
<line indent=""><comment><text>*&#160;</text><var>=================</var></comment></line>
<line indent=""><var>sub.EndTask</var><text>:</text></line>
<line indent=""><var>do&#160;if&#160;</var><var>$taskMove</var></line>
<line indent="&#160;"><var>[THIS]&#160;-&gt;</var><text>start&#160;task&#160;</text><var>$taskMove</var><text>&#160;with&#160;script&#160;</text><call>!lib.interrupt</call><text>&#160;and&#160;prio&#160;</text><var>100</var><text>:&#160;arg1=</text><var>null</var><text>&#160;arg2=</text><var>null</var><text>&#160;arg3=</text><var>null</var><text>&#160;arg4=</text><var>null</var><text>&#160;arg5=</text><var>null</var></line>
<line indent=""><var>do&#160;if&#160;</var><var>$taskCollision</var></line>
<line indent="&#160;"><var>[THIS]&#160;-&gt;</var><text>start&#160;task&#160;</text><var>$taskCollision</var><text>&#160;with&#160;script&#160;</text><call>!lib.interrupt</call><text>&#160;and&#160;prio&#160;</text><var>100</var><text>:&#160;arg1=</text><var>null</var><text>&#160;arg2=</text><var>null</var><text>&#160;arg3=</text><var>null</var><text>&#160;arg4=</text><var>null</var><text>&#160;arg5=</text><var>null</var></line>
<line indent=""><text>endsub</text></line>
<line indent=""></line>
<line indent=""><comment><text>*&#160;</text><var>=================</var></comment></line>
<line indent=""><comment><text>*&#160;</text><var>Check&#160;target&#160;ship&#160;has&#160;enough&#160;free&#160;space&#160;in&#160;cargo&#160;bay&#160;for&#160;a&#160;drone.</var></comment></line>
<line indent=""><comment><text>*&#160;</text><var>=================</var></comment></line>
<line indent=""><var>sub.CheckCargoBay</var><text>:</text></line>
<line indent=""><var>$volumeFree&#160;=&#160;</var><var>$target&#160;-&gt;</var><text>&#160;get&#160;free&#160;volume&#160;of&#160;cargo&#160;bay</text></line>
<line indent=""><var>$freeSpace&#160;=&#160;</var><var>$volumeFree</var><text>&#160;</text><var>-</var><text>&#160;</text><var>$volumeDrone</var></line>
<line indent=""><var>if&#160;</var><var>$freeSpace</var><text>&#160;</text><var>&lt;</var><text>&#160;</text><var>0</var></line>
<line indent="&#160;"><text>gosub&#160;</text><var>sub.EndTask</var></line>
<line indent="&#160;"><text>return&#160;</text><var>FLRET_NOCARGO</var></line>
<line indent=""><text>end</text></line>
<line indent=""><text>endsub</text></line>
<line indent=""><text>return&#160;</text><var>null</var></line>
</sourcetext>
<codearray>

<sval type="array" size="10">
  <sval type="string" val="!move.movetostation.drone"/>
  <sval type="int" val="73"/>
  <sval type="string" val="Drone dock to ship. Drone is caught as a ware instead of traditional ship docking. "/>
  <sval type="int" val="1"/>
  <sval type="int" val="0"/>
  <sval type="array" size="35">
    <sval type="string" val="target"/>
    <sval type="string" val="wareDrone"/>
    <sval type="string" val="volumeDrone"/>
    <sval type="string" val="debug"/>
    <sval type="string" val="id"/>
    <sval type="string" val="prepend"/>
    <sval type="string" val="range"/>
    <sval type="string" val="size"/>
    <sval type="string" val="bufferSmall"/>
    <sval type="string" val="bufferBig"/>
    <sval type="string" val="rangeBig"/>
    <sval type="string" val="rangeSmall"/>
    <sval type="string" val="bufferCollision"/>
    <sval type="string" val="dist"/>
    <sval type="string" val="taskMove"/>
    <sval type="string" val="taskCollision"/>
    <sval type="string" val="wait"/>
    <sval type="string" val="wrongWayMax"/>
    <sval type="string" val="wrongWayCount"/>
    <sval type="string" val="distOld"/>
    <sval type="string" val="precision"/>
    <sval type="string" val="x"/>
    <sval type="string" val="y"/>
    <sval type="string" val="z"/>
    <sval type="string" val="xOld"/>
    <sval type="string" val="yOld"/>
    <sval type="string" val="zOld"/>
    <sval type="string" val="amount"/>
    <sval type="string" val="wareObj"/>
    <sval type="string" val="result"/>
    <sval type="string" val="amount2"/>
    <sval type="string" val="wares"/>
    <sval type="string" val="task"/>
    <sval type="string" val="volumeFree"/>
    <sval type="string" val="freeSpace"/>
  </sval>
  <sval type="array" size="137">
    <sval type="array" size="4">
      <sval type="int" val="707"/>
      <sval type="int" val="131075"/>
      <sval type="int" val="1"/>
      <sval type="int" val="1"/>
    </sval>
    <sval type="array" size="4">
      <sval type="int" val="2047"/>
      <sval type="int" val="1"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="1"/>
    </sval>
    <sval type="array" size="4">
      <sval type="int" val="604"/>
      <sval type="int" val="2"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="1"/>
    </sval>
    <sval type="array" size="13">
      <sval type="int" val="104"/>
      <sval type="int" val="-1610610685"/>
      <sval type="int" val="3"/>
      <sval type="int" val="131075"/>
      <sval type="int" val="7"/>
      <sval type="int" val="10"/>
      <sval type="int" val="10"/>
      <sval type="int" val="15"/>
      <sval type="int" val="0"/>
      <sval type="int" val="3"/>
      <sval type="int" val="-1"/>
      <sval type="int" val="0"/>
      <sval type="int" val="-2"/>
    </sval>
    <sval type="array" size="7">
      <sval type="int" val="104"/>
      <sval type="int" val="3"/>
      <sval type="int" val="1"/>
      <sval type="int" val="4"/>
      <sval type="int" val="9595"/>
      <sval type="int" val="1"/>
      <sval type="int" val="-1"/>
    </sval>
    <sval type="array" size="4">
      <sval type="int" val="1036"/>
      <sval type="int" val="131075"/>
      <sval type="int" val="1"/>
      <sval type="int" val="4"/>
    </sval>
    <sval type="array" size="14">
      <sval type="int" val="149"/>
      <sval type="int" val="5"/>
      <sval type="int" val="5"/>
      <sval type="string" val="Docking &quot;%s ID: %s&quot; to &quot;%s&quot; -"/>
      <sval type="int" val="131075"/>
      <sval type="int" val="1"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="4"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="0"/>
      <sval type="int" val="0"/>
      <sval type="int" val="0"/>
      <sval type="int" val="0"/>
      <sval type="int" val="0"/>
    </sval>
    <sval type="array" size="17">
      <sval type="int" val="405"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="3"/>
      <sval type="int" val="131075"/>
      <sval type="int" val="10"/>
      <sval type="int" val="5"/>
      <sval type="string" val="%s Start"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="5"/>
      <sval type="int" val="0"/>
      <sval type="int" val="0"/>
      <sval type="int" val="0"/>
      <sval type="int" val="0"/>
      <sval type="int" val="0"/>
      <sval type="int" val="0"/>
      <sval type="int" val="0"/>
      <sval type="int" val="0"/>
    </sval>
    <sval type="array" size="4">
      <sval type="int" val="780"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="0"/>
      <sval type="int" val="6"/>
    </sval>
    <sval type="array" size="4">
      <sval type="int" val="780"/>
      <sval type="int" val="131075"/>
      <sval type="int" val="1"/>
      <sval type="int" val="7"/>
    </sval>
    <sval type="array" size="7">
      <sval type="int" val="104"/>
      <sval type="int" val="8"/>
      <sval type="int" val="1"/>
      <sval type="int" val="4"/>
      <sval type="int" val="15"/>
      <sval type="int" val="1"/>
      <sval type="int" val="-1"/>
    </sval>
    <sval type="array" size="13">
      <sval type="int" val="104"/>
      <sval type="int" val="-1610608893"/>
      <sval type="int" val="3"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="7"/>
      <sval type="int" val="4"/>
      <sval type="int" val="150"/>
      <sval type="int" val="15"/>
      <sval type="int" val="3"/>
      <sval type="int" val="3"/>
      <sval type="int" val="-1"/>
      <sval type="int" val="3"/>
      <sval type="int" val="-2"/>
    </sval>
    <sval type="array" size="7">
      <sval type="int" val="104"/>
      <sval type="int" val="9"/>
      <sval type="int" val="1"/>
      <sval type="int" val="4"/>
      <sval type="int" val="200"/>
      <sval type="int" val="1"/>
      <sval type="int" val="-1"/>
    </sval>
    <sval type="array" size="7">
      <sval type="int" val="104"/>
      <sval type="int" val="8"/>
      <sval type="int" val="1"/>
      <sval type="int" val="4"/>
      <sval type="int" val="50"/>
      <sval type="int" val="1"/>
      <sval type="int" val="-1"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="112"/>
      <sval type="int" val="22"/>
    </sval>
    <sval type="array" size="13">
      <sval type="int" val="104"/>
      <sval type="int" val="-1610608123"/>
      <sval type="int" val="3"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="7"/>
      <sval type="int" val="4"/>
      <sval type="int" val="500"/>
      <sval type="int" val="15"/>
      <sval type="int" val="3"/>
      <sval type="int" val="3"/>
      <sval type="int" val="-1"/>
      <sval type="int" val="3"/>
      <sval type="int" val="-2"/>
    </sval>
    <sval type="array" size="7">
      <sval type="int" val="104"/>
      <sval type="int" val="9"/>
      <sval type="int" val="1"/>
      <sval type="int" val="4"/>
      <sval type="int" val="350"/>
      <sval type="int" val="1"/>
      <sval type="int" val="-1"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="112"/>
      <sval type="int" val="22"/>
    </sval>
    <sval type="array" size="13">
      <sval type="int" val="104"/>
      <sval type="int" val="-1610607355"/>
      <sval type="int" val="3"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="7"/>
      <sval type="int" val="4"/>
      <sval type="int" val="2600"/>
      <sval type="int" val="15"/>
      <sval type="int" val="3"/>
      <sval type="int" val="3"/>
      <sval type="int" val="-1"/>
      <sval type="int" val="3"/>
      <sval type="int" val="-2"/>
    </sval>
    <sval type="array" size="7">
      <sval type="int" val="104"/>
      <sval type="int" val="9"/>
      <sval type="int" val="1"/>
      <sval type="int" val="4"/>
      <sval type="int" val="500"/>
      <sval type="int" val="1"/>
      <sval type="int" val="-1"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="112"/>
      <sval type="int" val="22"/>
    </sval>
    <sval type="array" size="7">
      <sval type="int" val="104"/>
      <sval type="int" val="9"/>
      <sval type="int" val="1"/>
      <sval type="int" val="4"/>
      <sval type="int" val="600"/>
      <sval type="int" val="1"/>
      <sval type="int" val="-1"/>
    </sval>
    <sval type="array" size="19">
      <sval type="int" val="104"/>
      <sval type="int" val="10"/>
      <sval type="int" val="5"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="6"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="7"/>
      <sval type="int" val="15"/>
      <sval type="int" val="11"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="9"/>
      <sval type="int" val="15"/>
      <sval type="int" val="11"/>
      <sval type="int" val="5"/>
      <sval type="int" val="-1"/>
      <sval type="int" val="11"/>
      <sval type="int" val="-2"/>
      <sval type="int" val="11"/>
      <sval type="int" val="-4"/>
    </sval>
    <sval type="array" size="19">
      <sval type="int" val="104"/>
      <sval type="int" val="11"/>
      <sval type="int" val="5"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="6"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="7"/>
      <sval type="int" val="15"/>
      <sval type="int" val="11"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="8"/>
      <sval type="int" val="15"/>
      <sval type="int" val="11"/>
      <sval type="int" val="5"/>
      <sval type="int" val="-1"/>
      <sval type="int" val="11"/>
      <sval type="int" val="-2"/>
      <sval type="int" val="11"/>
      <sval type="int" val="-4"/>
    </sval>
    <sval type="array" size="12">
      <sval type="int" val="1457"/>
      <sval type="int" val="11"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="11"/>
      <sval type="int" val="4"/>
      <sval type="int" val="150"/>
      <sval type="int" val="4"/>
      <sval type="int" val="0"/>
      <sval type="int" val="4"/>
      <sval type="int" val="0"/>
      <sval type="int" val="4"/>
      <sval type="int" val="0"/>
    </sval>
    <sval type="array" size="21">
      <sval type="int" val="104"/>
      <sval type="int" val="12"/>
      <sval type="int" val="5"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="6"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="9"/>
      <sval type="int" val="4"/>
      <sval type="int" val="8"/>
      <sval type="int" val="15"/>
      <sval type="int" val="13"/>
      <sval type="int" val="15"/>
      <sval type="int" val="11"/>
      <sval type="int" val="7"/>
      <sval type="int" val="-1"/>
      <sval type="int" val="11"/>
      <sval type="int" val="16"/>
      <sval type="int" val="-2"/>
      <sval type="int" val="13"/>
      <sval type="int" val="-3"/>
      <sval type="int" val="17"/>
    </sval>
    <sval type="array" size="6">
      <sval type="int" val="738"/>
      <sval type="int" val="13"/>
      <sval type="int" val="131075"/>
      <sval type="int" val="1"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="0"/>
    </sval>
    <sval type="array" size="7">
      <sval type="int" val="104"/>
      <sval type="int" val="14"/>
      <sval type="int" val="1"/>
      <sval type="int" val="0"/>
      <sval type="int" val="0"/>
      <sval type="int" val="1"/>
      <sval type="int" val="-1"/>
    </sval>
    <sval type="array" size="7">
      <sval type="int" val="104"/>
      <sval type="int" val="15"/>
      <sval type="int" val="1"/>
      <sval type="int" val="0"/>
      <sval type="int" val="0"/>
      <sval type="int" val="1"/>
      <sval type="int" val="-1"/>
    </sval>
    <sval type="array" size="7">
      <sval type="int" val="104"/>
      <sval type="int" val="16"/>
      <sval type="int" val="1"/>
      <sval type="int" val="4"/>
      <sval type="int" val="20"/>
      <sval type="int" val="1"/>
      <sval type="int" val="-1"/>
    </sval>
    <sval type="array" size="7">
      <sval type="int" val="104"/>
      <sval type="int" val="17"/>
      <sval type="int" val="1"/>
      <sval type="int" val="4"/>
      <sval type="int" val="8"/>
      <sval type="int" val="1"/>
      <sval type="int" val="-1"/>
    </sval>
    <sval type="array" size="7">
      <sval type="int" val="104"/>
      <sval type="int" val="18"/>
      <sval type="int" val="1"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="17"/>
      <sval type="int" val="1"/>
      <sval type="int" val="-1"/>
    </sval>
    <sval type="array" size="7">
      <sval type="int" val="104"/>
      <sval type="int" val="19"/>
      <sval type="int" val="1"/>
      <sval type="int" val="4"/>
      <sval type="int" val="9999999"/>
      <sval type="int" val="1"/>
      <sval type="int" val="-1"/>
    </sval>
    <sval type="array" size="13">
      <sval type="int" val="104"/>
      <sval type="int" val="-1610591991"/>
      <sval type="int" val="3"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="13"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="6"/>
      <sval type="int" val="15"/>
      <sval type="int" val="2"/>
      <sval type="int" val="3"/>
      <sval type="int" val="-1"/>
      <sval type="int" val="2"/>
      <sval type="int" val="-2"/>
    </sval>
    <sval type="array" size="4">
      <sval type="int" val="105"/>
      <sval type="int" val="-2147483647"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="16"/>
    </sval>
    <sval type="array" size="4">
      <sval type="int" val="706"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="0"/>
      <sval type="int" val="-536860924"/>
    </sval>
    <sval type="array" size="5">
      <sval type="int" val="519"/>
      <sval type="int" val="131075"/>
      <sval type="int" val="1"/>
      <sval type="int" val="0"/>
      <sval type="int" val="0"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="1167"/>
      <sval type="int" val="123"/>
    </sval>
    <sval type="array" size="3">
      <sval type="int" val="103"/>
      <sval type="int" val="0"/>
      <sval type="int" val="0"/>
    </sval>
    <sval type="array" size="6">
      <sval type="int" val="733"/>
      <sval type="int" val="131075"/>
      <sval type="int" val="1"/>
      <sval type="int" val="-536860156"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="0"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="1167"/>
      <sval type="int" val="123"/>
    </sval>
    <sval type="array" size="3">
      <sval type="int" val="103"/>
      <sval type="int" val="19"/>
      <sval type="int" val="14"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="1167"/>
      <sval type="int" val="129"/>
    </sval>
    <sval type="array" size="17">
      <sval type="int" val="405"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="3"/>
      <sval type="int" val="131075"/>
      <sval type="int" val="10"/>
      <sval type="int" val="5"/>
      <sval type="string" val="%s Looping"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="5"/>
      <sval type="int" val="0"/>
      <sval type="int" val="0"/>
      <sval type="int" val="0"/>
      <sval type="int" val="0"/>
      <sval type="int" val="0"/>
      <sval type="int" val="0"/>
      <sval type="int" val="0"/>
      <sval type="int" val="0"/>
    </sval>
    <sval type="array" size="4">
      <sval type="int" val="761"/>
      <sval type="int" val="131075"/>
      <sval type="int" val="1"/>
      <sval type="int" val="-1610598397"/>
    </sval>
    <sval type="array" size="6">
      <sval type="int" val="503"/>
      <sval type="int" val="131075"/>
      <sval type="int" val="1"/>
      <sval type="int" val="-1610600189"/>
      <sval type="int" val="4"/>
      <sval type="int" val="10000"/>
    </sval>
    <sval type="array" size="7">
      <sval type="int" val="104"/>
      <sval type="int" val="6"/>
      <sval type="int" val="1"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="10"/>
      <sval type="int" val="1"/>
      <sval type="int" val="-1"/>
    </sval>
    <sval type="array" size="7">
      <sval type="int" val="104"/>
      <sval type="int" val="20"/>
      <sval type="int" val="1"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="11"/>
      <sval type="int" val="1"/>
      <sval type="int" val="-1"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="112"/>
      <sval type="int" val="51"/>
    </sval>
    <sval type="array" size="7">
      <sval type="int" val="104"/>
      <sval type="int" val="6"/>
      <sval type="int" val="1"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="11"/>
      <sval type="int" val="1"/>
      <sval type="int" val="-1"/>
    </sval>
    <sval type="array" size="7">
      <sval type="int" val="104"/>
      <sval type="int" val="20"/>
      <sval type="int" val="1"/>
      <sval type="int" val="4"/>
      <sval type="int" val="20"/>
      <sval type="int" val="1"/>
      <sval type="int" val="-1"/>
    </sval>
    <sval type="array" size="21">
      <sval type="int" val="104"/>
      <sval type="int" val="-1610598909"/>
      <sval type="int" val="5"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="13"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="6"/>
      <sval type="int" val="4"/>
      <sval type="int" val="3"/>
      <sval type="int" val="15"/>
      <sval type="int" val="13"/>
      <sval type="int" val="15"/>
      <sval type="int" val="3"/>
      <sval type="int" val="7"/>
      <sval type="int" val="-1"/>
      <sval type="int" val="3"/>
      <sval type="int" val="16"/>
      <sval type="int" val="-2"/>
      <sval type="int" val="13"/>
      <sval type="int" val="-3"/>
      <sval type="int" val="17"/>
    </sval>
    <sval type="array" size="7">
      <sval type="int" val="104"/>
      <sval type="int" val="16"/>
      <sval type="int" val="1"/>
      <sval type="int" val="4"/>
      <sval type="int" val="500"/>
      <sval type="int" val="1"/>
      <sval type="int" val="-1"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="112"/>
      <sval type="int" val="55"/>
    </sval>
    <sval type="array" size="7">
      <sval type="int" val="104"/>
      <sval type="int" val="16"/>
      <sval type="int" val="1"/>
      <sval type="int" val="4"/>
      <sval type="int" val="1000"/>
      <sval type="int" val="1"/>
      <sval type="int" val="-1"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="112"/>
      <sval type="int" val="59"/>
    </sval>
    <sval type="array" size="7">
      <sval type="int" val="104"/>
      <sval type="int" val="6"/>
      <sval type="int" val="1"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="10"/>
      <sval type="int" val="1"/>
      <sval type="int" val="-1"/>
    </sval>
    <sval type="array" size="7">
      <sval type="int" val="104"/>
      <sval type="int" val="20"/>
      <sval type="int" val="1"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="11"/>
      <sval type="int" val="1"/>
      <sval type="int" val="-1"/>
    </sval>
    <sval type="array" size="7">
      <sval type="int" val="104"/>
      <sval type="int" val="16"/>
      <sval type="int" val="1"/>
      <sval type="int" val="4"/>
      <sval type="int" val="6000"/>
      <sval type="int" val="1"/>
      <sval type="int" val="-1"/>
    </sval>
    <sval type="array" size="6">
      <sval type="int" val="738"/>
      <sval type="int" val="13"/>
      <sval type="int" val="131075"/>
      <sval type="int" val="1"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="0"/>
    </sval>
    <sval type="array" size="4">
      <sval type="int" val="740"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="0"/>
      <sval type="int" val="21"/>
    </sval>
    <sval type="array" size="4">
      <sval type="int" val="741"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="0"/>
      <sval type="int" val="22"/>
    </sval>
    <sval type="array" size="4">
      <sval type="int" val="742"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="0"/>
      <sval type="int" val="23"/>
    </sval>
    <sval type="array" size="7">
      <sval type="int" val="1072"/>
      <sval type="int" val="131075"/>
      <sval type="int" val="1"/>
      <sval type="int" val="-536854012"/>
      <sval type="string" val="!move.movetopositioncontinue"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="14"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="1167"/>
      <sval type="int" val="114"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="112"/>
      <sval type="int" val="77"/>
    </sval>
    <sval type="array" size="37">
      <sval type="int" val="104"/>
      <sval type="int" val="-1610595067"/>
      <sval type="int" val="11"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="24"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="21"/>
      <sval type="int" val="15"/>
      <sval type="int" val="1"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="25"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="22"/>
      <sval type="int" val="15"/>
      <sval type="int" val="1"/>
      <sval type="int" val="15"/>
      <sval type="int" val="10"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="26"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="23"/>
      <sval type="int" val="15"/>
      <sval type="int" val="1"/>
      <sval type="int" val="15"/>
      <sval type="int" val="10"/>
      <sval type="int" val="11"/>
      <sval type="int" val="-1"/>
      <sval type="int" val="1"/>
      <sval type="int" val="-2"/>
      <sval type="int" val="10"/>
      <sval type="int" val="-4"/>
      <sval type="int" val="1"/>
      <sval type="int" val="-5"/>
      <sval type="int" val="10"/>
      <sval type="int" val="-8"/>
      <sval type="int" val="1"/>
      <sval type="int" val="-9"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="1167"/>
      <sval type="int" val="114"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="112"/>
      <sval type="int" val="77"/>
    </sval>
    <sval type="array" size="4">
      <sval type="int" val="761"/>
      <sval type="int" val="131075"/>
      <sval type="int" val="1"/>
      <sval type="int" val="-1610593019"/>
    </sval>
    <sval type="array" size="13">
      <sval type="int" val="104"/>
      <sval type="int" val="-1610593277"/>
      <sval type="int" val="3"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="13"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="19"/>
      <sval type="int" val="15"/>
      <sval type="int" val="2"/>
      <sval type="int" val="3"/>
      <sval type="int" val="-1"/>
      <sval type="int" val="2"/>
      <sval type="int" val="-2"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="143"/>
      <sval type="int" val="18"/>
    </sval>
    <sval type="array" size="7">
      <sval type="int" val="104"/>
      <sval type="int" val="-536851452"/>
      <sval type="int" val="1"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="18"/>
      <sval type="int" val="1"/>
      <sval type="int" val="-1"/>
    </sval>
    <sval type="array" size="7">
      <sval type="int" val="104"/>
      <sval type="int" val="18"/>
      <sval type="int" val="1"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="17"/>
      <sval type="int" val="1"/>
      <sval type="int" val="-1"/>
    </sval>
    <sval type="array" size="17">
      <sval type="int" val="405"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="3"/>
      <sval type="int" val="131075"/>
      <sval type="int" val="10"/>
      <sval type="int" val="5"/>
      <sval type="string" val="%s stupidly moving away, call movetoposition again."/>
      <sval type="int" val="131074"/>
      <sval type="int" val="5"/>
      <sval type="int" val="0"/>
      <sval type="int" val="0"/>
      <sval type="int" val="0"/>
      <sval type="int" val="0"/>
      <sval type="int" val="0"/>
      <sval type="int" val="0"/>
      <sval type="int" val="0"/>
      <sval type="int" val="0"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="1167"/>
      <sval type="int" val="114"/>
    </sval>
    <sval type="array" size="7">
      <sval type="int" val="104"/>
      <sval type="int" val="19"/>
      <sval type="int" val="1"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="13"/>
      <sval type="int" val="1"/>
      <sval type="int" val="-1"/>
    </sval>
    <sval type="array" size="7">
      <sval type="int" val="1072"/>
      <sval type="int" val="131075"/>
      <sval type="int" val="1"/>
      <sval type="int" val="-536850428"/>
      <sval type="string" val="!move.movetostation.drone.check"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="15"/>
    </sval>
    <sval type="array" size="6">
      <sval type="int" val="1462"/>
      <sval type="int" val="131075"/>
      <sval type="int" val="1"/>
      <sval type="int" val="15"/>
      <sval type="int" val="131075"/>
      <sval type="int" val="443"/>
    </sval>
    <sval type="array" size="18">
      <sval type="int" val="1017"/>
      <sval type="int" val="131075"/>
      <sval type="int" val="1"/>
      <sval type="string" val="!move.movetostation.drone.check"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="15"/>
      <sval type="int" val="4"/>
      <sval type="int" val="100"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="0"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="12"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="14"/>
      <sval type="int" val="0"/>
      <sval type="int" val="0"/>
      <sval type="int" val="0"/>
      <sval type="int" val="0"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="112"/>
      <sval type="int" val="33"/>
    </sval>
    <sval type="array" size="4">
      <sval type="int" val="761"/>
      <sval type="int" val="131075"/>
      <sval type="int" val="1"/>
      <sval type="int" val="-1610589181"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="1167"/>
      <sval type="int" val="123"/>
    </sval>
    <sval type="array" size="6">
      <sval type="int" val="507"/>
      <sval type="int" val="131075"/>
      <sval type="int" val="1"/>
      <sval type="int" val="-2147483647"/>
      <sval type="int" val="4"/>
      <sval type="int" val="20"/>
    </sval>
    <sval type="array" size="5">
      <sval type="int" val="1526"/>
      <sval type="int" val="131075"/>
      <sval type="int" val="1"/>
      <sval type="int" val="4"/>
      <sval type="int" val="0"/>
    </sval>
    <sval type="array" size="4">
      <sval type="int" val="105"/>
      <sval type="int" val="-2147483647"/>
      <sval type="int" val="4"/>
      <sval type="int" val="2000"/>
    </sval>
    <sval type="array" size="5">
      <sval type="int" val="1332"/>
      <sval type="int" val="131075"/>
      <sval type="int" val="1"/>
      <sval type="int" val="4"/>
      <sval type="int" val="0"/>
    </sval>
    <sval type="array" size="4">
      <sval type="int" val="740"/>
      <sval type="int" val="131075"/>
      <sval type="int" val="1"/>
      <sval type="int" val="21"/>
    </sval>
    <sval type="array" size="4">
      <sval type="int" val="741"/>
      <sval type="int" val="131075"/>
      <sval type="int" val="1"/>
      <sval type="int" val="22"/>
    </sval>
    <sval type="array" size="4">
      <sval type="int" val="742"/>
      <sval type="int" val="131075"/>
      <sval type="int" val="1"/>
      <sval type="int" val="23"/>
    </sval>
    <sval type="array" size="16">
      <sval type="int" val="102"/>
      <sval type="string" val="!lib.effect.spawn"/>
      <sval type="int" val="-2147483646"/>
      <sval type="int" val="0"/>
      <sval type="int" val="0"/>
      <sval type="int" val="5"/>
      <sval type="int" val="4"/>
      <sval type="int" val="189"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="21"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="22"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="23"/>
      <sval type="int" val="4"/>
      <sval type="int" val="2000"/>
    </sval>
    <sval type="array" size="4">
      <sval type="int" val="105"/>
      <sval type="int" val="-2147483647"/>
      <sval type="int" val="4"/>
      <sval type="int" val="400"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="1167"/>
      <sval type="int" val="129"/>
    </sval>
    <sval type="array" size="6">
      <sval type="int" val="619"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="0"/>
      <sval type="int" val="27"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="1"/>
    </sval>
    <sval type="array" size="4">
      <sval type="int" val="2369"/>
      <sval type="int" val="131075"/>
      <sval type="int" val="1"/>
      <sval type="int" val="28"/>
    </sval>
    <sval type="array" size="6">
      <sval type="int" val="541"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="0"/>
      <sval type="int" val="29"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="28"/>
    </sval>
    <sval type="array" size="6">
      <sval type="int" val="619"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="0"/>
      <sval type="int" val="30"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="1"/>
    </sval>
    <sval type="array" size="21">
      <sval type="int" val="104"/>
      <sval type="int" val="-1610585341"/>
      <sval type="int" val="5"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="30"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="27"/>
      <sval type="int" val="4"/>
      <sval type="int" val="1"/>
      <sval type="int" val="15"/>
      <sval type="int" val="11"/>
      <sval type="int" val="15"/>
      <sval type="int" val="1"/>
      <sval type="int" val="7"/>
      <sval type="int" val="-1"/>
      <sval type="int" val="1"/>
      <sval type="int" val="16"/>
      <sval type="int" val="-2"/>
      <sval type="int" val="11"/>
      <sval type="int" val="-3"/>
      <sval type="int" val="17"/>
    </sval>
    <sval type="array" size="13">
      <sval type="int" val="104"/>
      <sval type="int" val="-1610586365"/>
      <sval type="int" val="3"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="27"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="30"/>
      <sval type="int" val="15"/>
      <sval type="int" val="0"/>
      <sval type="int" val="3"/>
      <sval type="int" val="-1"/>
      <sval type="int" val="0"/>
      <sval type="int" val="-2"/>
    </sval>
    <sval type="array" size="8">
      <sval type="int" val="646"/>
      <sval type="int" val="131075"/>
      <sval type="int" val="1"/>
      <sval type="int" val="-2147483647"/>
      <sval type="int" val="4"/>
      <sval type="int" val="1"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="1"/>
    </sval>
    <sval type="array" size="13">
      <sval type="int" val="104"/>
      <sval type="int" val="-1610586616"/>
      <sval type="int" val="3"/>
      <sval type="int" val="131075"/>
      <sval type="int" val="7"/>
      <sval type="int" val="10"/>
      <sval type="int" val="10"/>
      <sval type="int" val="15"/>
      <sval type="int" val="0"/>
      <sval type="int" val="3"/>
      <sval type="int" val="-1"/>
      <sval type="int" val="0"/>
      <sval type="int" val="-2"/>
    </sval>
    <sval type="array" size="17">
      <sval type="int" val="405"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="3"/>
      <sval type="int" val="131075"/>
      <sval type="int" val="10"/>
      <sval type="int" val="5"/>
      <sval type="string" val="%s Undeploy to catch ware failed, no drone added"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="5"/>
      <sval type="int" val="0"/>
      <sval type="int" val="0"/>
      <sval type="int" val="0"/>
      <sval type="int" val="0"/>
      <sval type="int" val="0"/>
      <sval type="int" val="0"/>
      <sval type="int" val="0"/>
      <sval type="int" val="0"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="112"/>
      <sval type="int" val="107"/>
    </sval>
    <sval type="array" size="27">
      <sval type="int" val="104"/>
      <sval type="int" val="27"/>
      <sval type="int" val="7"/>
      <sval type="int" val="4"/>
      <sval type="int" val="-1"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="30"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="27"/>
      <sval type="int" val="15"/>
      <sval type="int" val="12"/>
      <sval type="int" val="4"/>
      <sval type="int" val="1"/>
      <sval type="int" val="15"/>
      <sval type="int" val="12"/>
      <sval type="int" val="15"/>
      <sval type="int" val="13"/>
      <sval type="int" val="9"/>
      <sval type="int" val="-1"/>
      <sval type="int" val="13"/>
      <sval type="int" val="16"/>
      <sval type="int" val="-2"/>
      <sval type="int" val="12"/>
      <sval type="int" val="-3"/>
      <sval type="int" val="12"/>
      <sval type="int" val="-5"/>
      <sval type="int" val="17"/>
    </sval>
    <sval type="array" size="8">
      <sval type="int" val="646"/>
      <sval type="int" val="131075"/>
      <sval type="int" val="1"/>
      <sval type="int" val="-2147483647"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="27"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="1"/>
    </sval>
    <sval type="array" size="13">
      <sval type="int" val="104"/>
      <sval type="int" val="-1610585336"/>
      <sval type="int" val="3"/>
      <sval type="int" val="131075"/>
      <sval type="int" val="7"/>
      <sval type="int" val="10"/>
      <sval type="int" val="10"/>
      <sval type="int" val="15"/>
      <sval type="int" val="0"/>
      <sval type="int" val="3"/>
      <sval type="int" val="-1"/>
      <sval type="int" val="0"/>
      <sval type="int" val="-2"/>
    </sval>
    <sval type="array" size="17">
      <sval type="int" val="405"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="3"/>
      <sval type="int" val="131075"/>
      <sval type="int" val="10"/>
      <sval type="int" val="5"/>
      <sval type="string" val="%s Undeploy to catch ware failed, more than 1 drone added"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="5"/>
      <sval type="int" val="0"/>
      <sval type="int" val="0"/>
      <sval type="int" val="0"/>
      <sval type="int" val="0"/>
      <sval type="int" val="0"/>
      <sval type="int" val="0"/>
      <sval type="int" val="0"/>
      <sval type="int" val="0"/>
    </sval>
    <sval type="array" size="6">
      <sval type="int" val="1867"/>
      <sval type="int" val="131075"/>
      <sval type="int" val="1"/>
      <sval type="int" val="31"/>
      <sval type="int" val="131075"/>
      <sval type="int" val="9"/>
    </sval>
    <sval type="array" size="4">
      <sval type="int" val="1734"/>
      <sval type="int" val="-1610584317"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="31"/>
    </sval>
    <sval type="array" size="6">
      <sval type="int" val="1462"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="0"/>
      <sval type="int" val="32"/>
      <sval type="int" val="131075"/>
      <sval type="int" val="443"/>
    </sval>
    <sval type="array" size="18">
      <sval type="int" val="1017"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="0"/>
      <sval type="string" val="!lib.freight.transfer.or.eject"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="32"/>
      <sval type="int" val="4"/>
      <sval type="int" val="100"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="31"/>
      <sval type="int" val="0"/>
      <sval type="int" val="0"/>
      <sval type="int" val="0"/>
      <sval type="int" val="0"/>
      <sval type="int" val="0"/>
      <sval type="int" val="0"/>
      <sval type="int" val="0"/>
      <sval type="int" val="0"/>
    </sval>
    <sval type="array" size="13">
      <sval type="int" val="104"/>
      <sval type="int" val="-1610583800"/>
      <sval type="int" val="3"/>
      <sval type="int" val="131075"/>
      <sval type="int" val="7"/>
      <sval type="int" val="10"/>
      <sval type="int" val="10"/>
      <sval type="int" val="15"/>
      <sval type="int" val="0"/>
      <sval type="int" val="3"/>
      <sval type="int" val="-1"/>
      <sval type="int" val="0"/>
      <sval type="int" val="-2"/>
    </sval>
    <sval type="array" size="17">
      <sval type="int" val="405"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="3"/>
      <sval type="int" val="131075"/>
      <sval type="int" val="10"/>
      <sval type="int" val="5"/>
      <sval type="string" val="%s Finished"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="5"/>
      <sval type="int" val="0"/>
      <sval type="int" val="0"/>
      <sval type="int" val="0"/>
      <sval type="int" val="0"/>
      <sval type="int" val="0"/>
      <sval type="int" val="0"/>
      <sval type="int" val="0"/>
      <sval type="int" val="0"/>
    </sval>
    <sval type="array" size="3">
      <sval type="int" val="103"/>
      <sval type="int" val="19"/>
      <sval type="int" val="2"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="101"/>
      <sval type="string" val="sub.MoveToPosition"/>
    </sval>
    <sval type="array" size="7">
      <sval type="int" val="104"/>
      <sval type="int" val="-536840953"/>
      <sval type="int" val="1"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="14"/>
      <sval type="int" val="1"/>
      <sval type="int" val="-1"/>
    </sval>
    <sval type="array" size="6">
      <sval type="int" val="1462"/>
      <sval type="int" val="131075"/>
      <sval type="int" val="1"/>
      <sval type="int" val="14"/>
      <sval type="int" val="131075"/>
      <sval type="int" val="443"/>
    </sval>
    <sval type="array" size="17">
      <sval type="int" val="405"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="3"/>
      <sval type="int" val="131075"/>
      <sval type="int" val="10"/>
      <sval type="int" val="5"/>
      <sval type="string" val="%s Starting move to pos continue"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="5"/>
      <sval type="int" val="0"/>
      <sval type="int" val="0"/>
      <sval type="int" val="0"/>
      <sval type="int" val="0"/>
      <sval type="int" val="0"/>
      <sval type="int" val="0"/>
      <sval type="int" val="0"/>
      <sval type="int" val="0"/>
    </sval>
    <sval type="array" size="18">
      <sval type="int" val="1017"/>
      <sval type="int" val="131075"/>
      <sval type="int" val="1"/>
      <sval type="string" val="!move.movetopositioncontinue"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="14"/>
      <sval type="int" val="4"/>
      <sval type="int" val="100"/>
      <sval type="int" val="131075"/>
      <sval type="int" val="6"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="21"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="22"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="23"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="20"/>
    </sval>
    <sval type="array" size="7">
      <sval type="int" val="104"/>
      <sval type="int" val="24"/>
      <sval type="int" val="1"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="21"/>
      <sval type="int" val="1"/>
      <sval type="int" val="-1"/>
    </sval>
    <sval type="array" size="7">
      <sval type="int" val="104"/>
      <sval type="int" val="25"/>
      <sval type="int" val="1"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="22"/>
      <sval type="int" val="1"/>
      <sval type="int" val="-1"/>
    </sval>
    <sval type="array" size="7">
      <sval type="int" val="104"/>
      <sval type="int" val="26"/>
      <sval type="int" val="1"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="23"/>
      <sval type="int" val="1"/>
      <sval type="int" val="-1"/>
    </sval>
    <sval type="array" size="1">
      <sval type="int" val="1168"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="101"/>
      <sval type="string" val="sub.EndTask"/>
    </sval>
    <sval type="array" size="7">
      <sval type="int" val="104"/>
      <sval type="int" val="-1610580472"/>
      <sval type="int" val="1"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="14"/>
      <sval type="int" val="1"/>
      <sval type="int" val="-1"/>
    </sval>
    <sval type="array" size="18">
      <sval type="int" val="1017"/>
      <sval type="int" val="131075"/>
      <sval type="int" val="1"/>
      <sval type="string" val="!lib.interrupt"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="14"/>
      <sval type="int" val="4"/>
      <sval type="int" val="100"/>
      <sval type="int" val="0"/>
      <sval type="int" val="0"/>
      <sval type="int" val="0"/>
      <sval type="int" val="0"/>
      <sval type="int" val="0"/>
      <sval type="int" val="0"/>
      <sval type="int" val="0"/>
      <sval type="int" val="0"/>
      <sval type="int" val="0"/>
      <sval type="int" val="0"/>
    </sval>
    <sval type="array" size="7">
      <sval type="int" val="104"/>
      <sval type="int" val="-1610579960"/>
      <sval type="int" val="1"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="15"/>
      <sval type="int" val="1"/>
      <sval type="int" val="-1"/>
    </sval>
    <sval type="array" size="18">
      <sval type="int" val="1017"/>
      <sval type="int" val="131075"/>
      <sval type="int" val="1"/>
      <sval type="string" val="!lib.interrupt"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="15"/>
      <sval type="int" val="4"/>
      <sval type="int" val="100"/>
      <sval type="int" val="0"/>
      <sval type="int" val="0"/>
      <sval type="int" val="0"/>
      <sval type="int" val="0"/>
      <sval type="int" val="0"/>
      <sval type="int" val="0"/>
      <sval type="int" val="0"/>
      <sval type="int" val="0"/>
      <sval type="int" val="0"/>
      <sval type="int" val="0"/>
    </sval>
    <sval type="array" size="1">
      <sval type="int" val="1168"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="101"/>
      <sval type="string" val="sub.CheckCargoBay"/>
    </sval>
    <sval type="array" size="4">
      <sval type="int" val="612"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="0"/>
      <sval type="int" val="33"/>
    </sval>
    <sval type="array" size="13">
      <sval type="int" val="104"/>
      <sval type="int" val="34"/>
      <sval type="int" val="3"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="33"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="2"/>
      <sval type="int" val="15"/>
      <sval type="int" val="12"/>
      <sval type="int" val="3"/>
      <sval type="int" val="-1"/>
      <sval type="int" val="12"/>
      <sval type="int" val="-2"/>
    </sval>
    <sval type="array" size="13">
      <sval type="int" val="104"/>
      <sval type="int" val="-1610578173"/>
      <sval type="int" val="3"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="34"/>
      <sval type="int" val="4"/>
      <sval type="int" val="0"/>
      <sval type="int" val="15"/>
      <sval type="int" val="3"/>
      <sval type="int" val="3"/>
      <sval type="int" val="-1"/>
      <sval type="int" val="3"/>
      <sval type="int" val="-2"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="1167"/>
      <sval type="int" val="123"/>
    </sval>
    <sval type="array" size="3">
      <sval type="int" val="103"/>
      <sval type="int" val="19"/>
      <sval type="int" val="15"/>
    </sval>
    <sval type="array" size="1">
      <sval type="int" val="1168"/>
    </sval>
    <sval type="array" size="3">
      <sval type="int" val="103"/>
      <sval type="int" val="0"/>
      <sval type="int" val="0"/>
    </sval>
  </sval>
  <sval type="array" size="1">
    <sval type="array" size="2">
      <sval type="int" val="21"/>
      <sval type="string" val=""/>
    </sval>
  </sval>
  <sval type="array" size="66">
    <sval type="array" size="2">
      <sval type="int" val="3"/>
      <sval type="int" val="2"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="8"/>
      <sval type="int" val="4"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="8"/>
      <sval type="int" val="2"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="10"/>
      <sval type="int" val="2"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="21"/>
      <sval type="int" val="5"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="22"/>
      <sval type="int" val="4"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="22"/>
      <sval type="int" val="2"/>
    </sval>
    <sval type="array" size="3">
      <sval type="int" val="25"/>
      <sval type="int" val="1"/>
      <sval type="string" val="no collision buffer should be about 2km"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="26"/>
      <sval type="int" val="2"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="33"/>
      <sval type="int" val="2"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="39"/>
      <sval type="int" val="4"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="39"/>
      <sval type="int" val="2"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="42"/>
      <sval type="int" val="4"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="42"/>
      <sval type="int" val="2"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="43"/>
      <sval type="int" val="2"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="44"/>
      <sval type="int" val="2"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="45"/>
      <sval type="int" val="2"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="49"/>
      <sval type="int" val="5"/>
    </sval>
    <sval type="array" size="3">
      <sval type="int" val="49"/>
      <sval type="int" val="1"/>
      <sval type="string" val="No collision set in drone.check means we can get closer to target ship, which looks better. "/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="51"/>
      <sval type="int" val="4"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="51"/>
      <sval type="int" val="2"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="54"/>
      <sval type="int" val="5"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="55"/>
      <sval type="int" val="4"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="55"/>
      <sval type="int" val="2"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="56"/>
      <sval type="int" val="5"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="59"/>
      <sval type="int" val="4"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="59"/>
      <sval type="int" val="2"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="60"/>
      <sval type="int" val="2"/>
    </sval>
    <sval type="array" size="3">
      <sval type="int" val="74"/>
      <sval type="int" val="1"/>
      <sval type="string" val="Try to wake drone up from weird maneuver where it flies miles away from target before turning back"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="76"/>
      <sval type="int" val="4"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="76"/>
      <sval type="int" val="4"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="77"/>
      <sval type="int" val="4"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="77"/>
      <sval type="int" val="2"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="80"/>
      <sval type="int" val="4"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="81"/>
      <sval type="int" val="4"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="81"/>
      <sval type="int" val="2"/>
    </sval>
    <sval type="array" size="3">
      <sval type="int" val="81"/>
      <sval type="int" val="1"/>
      <sval type="string" val="We made it, now to make docking look pretty"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="92"/>
      <sval type="int" val="4"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="92"/>
      <sval type="int" val="2"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="93"/>
      <sval type="int" val="2"/>
    </sval>
    <sval type="array" size="3">
      <sval type="int" val="93"/>
      <sval type="int" val="1"/>
      <sval type="string" val="Now we can actually dock. "/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="97"/>
      <sval type="int" val="2"/>
    </sval>
    <sval type="array" size="3">
      <sval type="int" val="97"/>
      <sval type="int" val="1"/>
      <sval type="string" val="backup if undeploy and catch ware commands refuse to play nice."/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="100"/>
      <sval type="int" val="2"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="103"/>
      <sval type="int" val="5"/>
    </sval>
    <sval type="array" size="3">
      <sval type="int" val="103"/>
      <sval type="int" val="1"/>
      <sval type="string" val="if $amount2 &gt; ($amount + 1)"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="105"/>
      <sval type="int" val="2"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="107"/>
      <sval type="int" val="4"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="107"/>
      <sval type="int" val="4"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="107"/>
      <sval type="int" val="2"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="111"/>
      <sval type="int" val="4"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="111"/>
      <sval type="int" val="2"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="113"/>
      <sval type="int" val="2"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="114"/>
      <sval type="int" val="2"/>
    </sval>
    <sval type="array" size="3">
      <sval type="int" val="114"/>
      <sval type="int" val="1"/>
      <sval type="string" val="================="/>
    </sval>
    <sval type="array" size="3">
      <sval type="int" val="114"/>
      <sval type="int" val="1"/>
      <sval type="string" val="Move to position"/>
    </sval>
    <sval type="array" size="3">
      <sval type="int" val="114"/>
      <sval type="int" val="1"/>
      <sval type="string" val="================="/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="123"/>
      <sval type="int" val="2"/>
    </sval>
    <sval type="array" size="3">
      <sval type="int" val="123"/>
      <sval type="int" val="1"/>
      <sval type="string" val="================="/>
    </sval>
    <sval type="array" size="3">
      <sval type="int" val="123"/>
      <sval type="int" val="1"/>
      <sval type="string" val="End tasks"/>
    </sval>
    <sval type="array" size="3">
      <sval type="int" val="123"/>
      <sval type="int" val="1"/>
      <sval type="string" val="================="/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="129"/>
      <sval type="int" val="2"/>
    </sval>
    <sval type="array" size="3">
      <sval type="int" val="129"/>
      <sval type="int" val="1"/>
      <sval type="string" val="================="/>
    </sval>
    <sval type="array" size="3">
      <sval type="int" val="129"/>
      <sval type="int" val="1"/>
      <sval type="string" val="Check target ship has enough free space in cargo bay for a drone."/>
    </sval>
    <sval type="array" size="3">
      <sval type="int" val="129"/>
      <sval type="int" val="1"/>
      <sval type="string" val="================="/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="135"/>
      <sval type="int" val="4"/>
    </sval>
  </sval>
  <sval type="int" val="0"/>
</sval>

</codearray>
<nosignature>4846</nosignature>
</script>
